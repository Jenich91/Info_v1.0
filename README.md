# Info v1.0

Анализ и статистика данных по школе.


## Introduction

Разработка на языке программирования PL/pgSQL базы данных со знаниями о школе, процедуры и функции для получения информации, а также процедуры и триггеры для её изменения.
Структура базы данных для анализа и статистики данных по школе описывает несколько таблиц и их связи между собой. Основные таблицы включают в себя информацию о пирах, заданиях, статусах проверок, друзьях, рекомендациях, полученных XP и информацию о посещениях кампуса.

## Создание базы данных
Таблица "Peers" содержит информацию о пирах, включая ник и день рождения.

Таблица "Tasks" описывает задания, их условия входа и максимальное количество XP.

Таблица "P2P" хранит информацию о проверках "peer-to-peer".

Таблица "Verter" содержит данные о проверках Verter'ом.

Таблица "Checks" описывает состояние проверок заданий.

Таблица "TransferredPoints" отслеживает количество переданных пир поинтов.

Таблица "Friends" содержит информацию о дружеских связях между пирами.

Таблица "Recommendations" содержит информацию о рекомендациях для прохождения P2P проверок.

Таблица "XP" содержит информацию о полученном XP за успешные проверки заданий.

Таблица "TimeTracking" отслеживает посещения кампуса.

В была создана база данных по описанной структуре. Таблицы были созданы в файле "part1.sql", включая процедуры для импорта и экспорта данных в формате .csv. Добавление записей в каждую из таблиц.
Cкрипт "part2.sql", содержит процедуры и тестовые запросы для различных операций: 
  Процедура добавления P2P проверки
  Процедура добавления проверки Verter'ом
  Триггер: после добавления записи со статутом "начало" в таблицу P2P, изменить соответствующую запись в таблице TransferredPoints
  Триггер: перед добавлением записи в таблицу XP, проверить корректность добавляемой записи

# Получение данных

 \Функция, возвращающая таблицу TransferredPoints в более человекочитаемом виде
 \Функция, возвращающая таблицу с данными о проверенных заданиях, количестве полученного XP
 \Функция, определяющая пиров, которые не выходили из кампуса в течение всего дня
 \Функция для нахождения процента успешных и неуспешных проверок за всё время
 \Функция для подсчёта изменения в количестве пир поинтов каждого пира по таблице TransferredPoints
 \Функция для подсчёта изменения в количестве пир поинтов каждого пира по таблице из первой функции
 \Функция для определения самого часто проверяемого задания за каждый день
 \Функция для определения длительности последней P2P проверки
 \Процедура для поиска пиров, выполнивших весь заданный блок задач и даты завершения последнего задания
 \Функция для определения, к какому пиру стоит идти на проверку каждому обучающемуся, исходя из рекомендаций друзей пира
 \Процедура для определения процента пиров, которые приступили к блокам, а также тех, кто не приступил
 \Процедура для определения N пиров с наибольшим числом друзей
 \Процедура для определения процента пиров, успешно проходивших проверку в свой день рождения
 \Процедура для определения количества XP, полученного в сумме каждым пиром
 \Процедура для определения пиров, сдавших указанные задания и не сдавших определенное задание
 \Процедура для определения количества предшествующих задач для каждой задачи
 \Процедура для нахождения "удачных" для проверок дней
 \Процедура для нахождения пира с наибольшим числом выполненных заданий
 \Процедура для нахождения пира с наибольшим количеством XP
 \Процедура для нахождения пира, проведшего сегодня в кампусе больше всего времени
 \Процедура для определения пиров, приходивших раньше указанного времени не менее указанного числа раз за всё время
 \Процедура для определения пиров, выходивших за последние указанное количество дней из кампуса больше указанного числа раз
 \Процедура для определения пира, который пришел сегодня последним
 \Процедура для определения пиров, которые выходили вчера из кампуса больше указанного количества минут
 \Процедура для определения процента ранних входов в кампус по месяцам
 
# Метаданные
Была подготовлена база данных для тестирования различных процедур и функций. Были созданы процедуры для удаления таблиц, списка скалярных SQL функций, а также для удаления всех SQL DDL триггеров в текущей базе данных. Кроме того, была создана процедура для поиска и вывода имен и описаний хранимых процедур и скалярных функций, в тексте которых встречается указанная строка.

Все это было реализовано, чтобы обеспечить удобные инструменты для тестирования различных аспектов базы данных, таких как управление таблицами, функциями, процедурами и триггерами, а также поиск и анализ соответствующих объектов в базе данных.
